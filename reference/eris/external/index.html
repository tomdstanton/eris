
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Uncovering IS-mediated discord in bacterial genomes.">
      
      
      
        <link rel="canonical" href="https://tomdstanton.github.io/eris/reference/eris/external/">
      
      
        <link rel="prev" href="../db/">
      
      
        <link rel="next" href="../graph/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>eris.external - eris üß¨üßû‚Äç‚ôÄüîÆÔ∏è</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#eris.external" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="eris üß¨üßû‚Äç‚ôÄüîÆÔ∏è" class="md-header__button md-logo" aria-label="eris üß¨üßû‚Äç‚ôÄüîÆÔ∏è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 2h2v2c0 1.44.68 2.61 1.88 3.78.86.83 2.01 1.63 3.21 2.42l-1.83 1.19C8.27 10.72 7.31 10 6.5 9.21 5.07 7.82 4 6.1 4 4zm14 0h2v2c0 2.1-1.07 3.82-2.5 5.21-1.41 1.38-3.21 2.52-4.96 3.63-1.75 1.12-3.45 2.21-4.66 3.38C6.68 17.39 6 18.56 6 20v2H4v-2c0-2.1 1.07-3.82 2.5-5.21 1.41-1.38 3.21-2.52 4.96-3.63 1.75-1.12 3.45-2.21 4.66-3.38C17.32 6.61 18 5.44 18 4zm-3.26 10.61c.99.67 1.95 1.39 2.76 2.18C18.93 16.18 20 17.9 20 20v2h-2v-2c0-1.44-.68-2.61-1.88-3.78-.86-.83-2.01-1.63-3.21-2.42zM7 3h10v1l-.06.5H7.06L7 4zm.68 3h8.64c-.24.34-.52.69-.9 1.06l-.51.44H9.07l-.49-.44c-.38-.37-.66-.72-.9-1.06m1.41 10.5h5.84l.49.44c.38.37.66.72.9 1.06H7.68c.24-.34.52-.69.9-1.06zm-2.03 3h9.88l.06.5v1H7v-1z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            eris üß¨üßû‚Äç‚ôÄüîÆÔ∏è
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              eris.external
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tomdstanton/eris" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    tomdstanton/eris
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="eris üß¨üßû‚Äç‚ôÄüîÆÔ∏è" class="md-nav__button md-logo" aria-label="eris üß¨üßû‚Äç‚ôÄüîÆÔ∏è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 2h2v2c0 1.44.68 2.61 1.88 3.78.86.83 2.01 1.63 3.21 2.42l-1.83 1.19C8.27 10.72 7.31 10 6.5 9.21 5.07 7.82 4 6.1 4 4zm14 0h2v2c0 2.1-1.07 3.82-2.5 5.21-1.41 1.38-3.21 2.52-4.96 3.63-1.75 1.12-3.45 2.21-4.66 3.38C6.68 17.39 6 18.56 6 20v2H4v-2c0-2.1 1.07-3.82 2.5-5.21 1.41-1.38 3.21-2.52 4.96-3.63 1.75-1.12 3.45-2.21 4.66-3.38C17.32 6.61 18 5.44 18 4zm-3.26 10.61c.99.67 1.95 1.39 2.76 2.18C18.93 16.18 20 17.9 20 20v2h-2v-2c0-1.44-.68-2.61-1.88-3.78-.86-.83-2.01-1.63-3.21-2.42zM7 3h10v1l-.06.5H7.06L7 4zm.68 3h8.64c-.24.34-.52.69-.9 1.06l-.51.44H9.07l-.49-.44c-.38-.37-.66-.72-.9-1.06m1.41 10.5h5.84l.49.44c.38.37.66.72.9 1.06H7.68c.24-.34.52-.69.9-1.06zm-2.03 3h9.88l.06.5v1H7v-1z"/></svg>

    </a>
    eris üß¨üßû‚Äç‚ôÄüîÆÔ∏è
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tomdstanton/eris" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    tomdstanton/eris
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>eris
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>eris
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eris
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alignment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>alignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alphabet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>alphabet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>cli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>db
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>external
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>external
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#eris.external" class="md-nav__link">
    <span class="md-ellipsis">
      external
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.ExternalProgram" class="md-nav__link">
    <span class="md-ellipsis">
      ExternalProgram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.Minimap2" class="md-nav__link">
    <span class="md-ellipsis">
      Minimap2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Minimap2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eris.external.Minimap2.align" class="md-nav__link">
    <span class="md-ellipsis">
      align
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eris.external.Minimap2.build_index" class="md-nav__link">
    <span class="md-ellipsis">
      build_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eris.external.Minimap2.cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.Minimap2AlignConfig" class="md-nav__link">
    <span class="md-ellipsis">
      Minimap2AlignConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.Minimap2IndexConfig" class="md-nav__link">
    <span class="md-ellipsis">
      Minimap2IndexConfig
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>io
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>mapper
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>pan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>scan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../seq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>seq
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#eris.external" class="md-nav__link">
    <span class="md-ellipsis">
      external
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.ExternalProgram" class="md-nav__link">
    <span class="md-ellipsis">
      ExternalProgram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.Minimap2" class="md-nav__link">
    <span class="md-ellipsis">
      Minimap2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Minimap2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eris.external.Minimap2.align" class="md-nav__link">
    <span class="md-ellipsis">
      align
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eris.external.Minimap2.build_index" class="md-nav__link">
    <span class="md-ellipsis">
      build_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eris.external.Minimap2.cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.Minimap2AlignConfig" class="md-nav__link">
    <span class="md-ellipsis">
      Minimap2AlignConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eris.external.Minimap2IndexConfig" class="md-nav__link">
    <span class="md-ellipsis">
      Minimap2IndexConfig
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1><code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>external</h1>

<div class="doc doc-object doc-module">



<a id="eris.external"></a>
    <div class="doc doc-contents first">

        <p>Module for managing external programs such as Minimap2.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="eris.external.ExternalProgram" class="doc doc-heading">
            <code>ExternalProgram</code>


</h2>


    <div class="doc doc-contents ">


        <p>Base class to handle an external program to be executed in subprocesses</p>







              <details class="quote">
                <summary>Source code in <code>eris/external.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExternalProgram</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class to handle an external program to be executed in subprocesses</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">binary</span> <span class="o">:=</span> <span class="nb">next</span><span class="p">(</span><span class="n">find_executable_binaries</span><span class="p">(</span><span class="n">program</span><span class="p">)))</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ExternalProgramError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Could not find </span><span class="si">{</span><span class="n">program</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_program</span> <span class="o">=</span> <span class="n">program</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_binary</span> <span class="o">=</span> <span class="n">binary</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_program</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_binary</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">input_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stdout</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">Popen</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_binary</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">PIPE</span> <span class="k">if</span> <span class="n">input_</span> <span class="k">else</span> <span class="n">DEVNULL</span><span class="p">,</span>
                   <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span> <span class="k">if</span> <span class="n">stdout</span> <span class="k">else</span> <span class="n">DEVNULL</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">process</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">process</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">input_</span><span class="p">)</span>  
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="eris.external.Minimap2" class="doc doc-heading">
            <code>Minimap2</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ExternalProgram (eris.external.ExternalProgram)" href="#eris.external.ExternalProgram">ExternalProgram</a></code></p>


        <p>An aligner instance using Minimap2. The class can be instantiated with targets which will create a temporary
index file, that can be handled safely with context management.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">eris.external</span><span class="w"> </span><span class="kn">import</span> <span class="n">Minimap2</span>
<span class="gp">... </span><span class="kn">from</span><span class="w"> </span><span class="nn">eris.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">Genome</span>
<span class="gp">... </span><span class="k">with</span> <span class="n">Minimap2</span><span class="p">(</span><span class="n">targets</span><span class="o">=</span><span class="n">Genome</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;tests.fasta&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">aligner</span><span class="p">:</span>  <span class="c1"># Build the index from genome 1</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">alignment</span> <span class="ow">in</span> <span class="n">aligner</span><span class="p">(</span><span class="n">Genome</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;test2.gfa&#39;</span><span class="p">)):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">alignment</span><span class="p">)</span>
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>eris/external.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Minimap2</span><span class="p">(</span><span class="n">ExternalProgram</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An aligner instance using Minimap2. The class can be instantiated with targets which will create a temporary</span>
<span class="sd">    index file, that can be handled safely with context management.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; from eris.external import Minimap2</span>
<span class="sd">        ... from eris.io import Genome</span>
<span class="sd">        ... with Minimap2(targets=Genome.from_file(&#39;tests.fasta&#39;)) as aligner:  # Build the index from genome 1</span>
<span class="sd">        ...     for alignment in aligner(Genome.from_file(&#39;test2.gfa&#39;)):</span>
<span class="sd">        ...         print(alignment)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">targets</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">align_config</span><span class="p">:</span> <span class="n">Minimap2AlignConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">index_config</span><span class="p">:</span> <span class="n">Minimap2IndexConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;minimap2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_align_config</span><span class="p">:</span> <span class="n">Minimap2AlignConfig</span> <span class="o">=</span> <span class="n">align_config</span> <span class="ow">or</span> <span class="n">Minimap2AlignConfig</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_index_config</span><span class="p">:</span> <span class="n">Minimap2IndexConfig</span> <span class="o">=</span> <span class="n">index_config</span> <span class="ow">or</span> <span class="n">Minimap2IndexConfig</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">targets</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_index</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cleans up resources related to the target index if it is set.</span>

<span class="sd">        This method checks if there is a target index specified and, if so, closes the</span>
<span class="sd">        index to release any held resources. It also resets the target index</span>
<span class="sd">        reference to None, ensuring subsequent operations do not attempt to access</span>
<span class="sd">        a closed resource.</span>

<span class="sd">        Raises:</span>
<span class="sd">            No explicit exceptions are raised, but calling operations on a closed</span>
<span class="sd">            resource externally could produce runtime errors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_seqs</span><span class="p">(</span><span class="o">*</span><span class="n">seqs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">],</span> <span class="n">pipe_arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks query or target inputs based on the types passed</span>
<span class="sd">        Returns:</span>
<span class="sd">            A tuple of the argument to be passed to the subprocess and, if necessary, the piped input (or none)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If pipe, the input MUST be a mixture of str, Record, Feature, else MUST be Path, SeqFile</span>
        <span class="n">proc_arg</span><span class="p">,</span> <span class="n">pipe</span> <span class="o">=</span> <span class="p">[],</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">seqs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">)):</span>
                <span class="c1"># Check arg_types to make sure it doesn&#39;t contain pipe-able types (Record, Feature, str)</span>
                <span class="k">if</span> <span class="n">pipe</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">Minimap2Error</span><span class="p">(</span><span class="s1">&#39;Cannot mix pipe-able inputs with file-like inputs&#39;</span><span class="p">)</span>
                <span class="n">proc_arg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>  <span class="c1"># Requires SeqFile str representation to be SeqFile.path.__str__</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">proc_arg</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">Minimap2Error</span><span class="p">(</span><span class="s1">&#39;Cannot mix pipe-able inputs with file-like inputs&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="n">Minimap2Error</span><span class="p">(</span><span class="s1">&#39;If input is a string, it must be in sequence format&#39;</span><span class="p">)</span>
                    <span class="n">pipe</span> <span class="o">+=</span> <span class="n">i</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pipe</span> <span class="o">+=</span> <span class="nb">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;fasta&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">proc_arg</span><span class="p">)</span> <span class="k">if</span> <span class="n">proc_arg</span> <span class="k">else</span> <span class="n">pipe_arg</span><span class="p">,</span> <span class="n">pipe</span> <span class="ow">or</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_index</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">targets</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">]]],</span>
            <span class="n">config</span><span class="p">:</span> <span class="n">Minimap2IndexConfig</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds an index for the targets and writes to a temporary file</span>

<span class="sd">        :param targets: The targets to index; can be a fasta-formatted string, path to a fasta file,</span>
<span class="sd">                        ``Records`` or ``Features``</span>
<span class="sd">        :returns: A Path to the temporary file containing the index</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arg</span><span class="p">,</span> <span class="n">pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_seqs</span><span class="p">(</span><span class="o">*</span><span class="n">targets</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index_config</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="o">=</span> <span class="n">NamedTemporaryFile</span><span class="p">()</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">_build_params</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s1"> -d </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">pipe</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_non_empty_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">raise</span> <span class="n">Minimap2Error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Failed to build index, </span><span class="si">{</span><span class="n">stderr</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">align</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">queries</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">]]],</span>
            <span class="n">targets</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">config</span><span class="p">:</span> <span class="n">Minimap2AlignConfig</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Alignment</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Aligns queries to targets.</span>

<span class="sd">        :param queries: Alignment queries; can be a fasta-formatted string, path to a fasta file, ``Records`` or</span>
<span class="sd">                        ``Features``</span>

<span class="sd">        :param targets: Optional Alignment targets; can be a fasta-formatted string, path to a fasta file, ``Records``</span>
<span class="sd">                        or ``Features``; will otherwise use the target index built at instantiation.</span>
<span class="sd">                        If ``targets`` is passed and a target index exists, the target index is ignored.</span>
<span class="sd">                        If ``query`` is not a path and ``targets`` is not a path, a new target index will need to be</span>
<span class="sd">                        built, which will overwrite any existing target index, printing a ``Minimap2Warning``.</span>

<span class="sd">        :returns: A generator of ``Alignment`` objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query_arg</span><span class="p">,</span> <span class="n">query_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_seqs</span><span class="p">(</span><span class="o">*</span><span class="n">queries</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_align_config</span>
        <span class="k">if</span> <span class="n">targets</span><span class="p">:</span>
            <span class="n">target_arg</span><span class="p">,</span> <span class="n">target_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_seqs</span><span class="p">(</span><span class="o">*</span><span class="n">targets</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">query_pipe</span> <span class="ow">and</span> <span class="n">target_pipe</span><span class="p">:</span>  <span class="c1"># Both are stdin, so we need to create the target index</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="p">:</span>  <span class="c1"># Existing target index, raise an error rather than overwriting</span>
                    <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Overwriting existing target index&#39;</span><span class="p">,</span> <span class="n">Minimap2Warning</span><span class="p">)</span>
                <span class="n">target_arg</span><span class="p">,</span> <span class="n">target_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_index</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="p">:</span>
                <span class="n">target_arg</span><span class="p">,</span> <span class="n">target_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">Minimap2Error</span><span class="p">(</span><span class="s1">&#39;Targets must be supplied if no target index has been built&#39;</span><span class="p">)</span>

        <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">_build_params</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">target_arg</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">query_arg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">query_pipe</span> <span class="ow">or</span> <span class="n">target_pipe</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stdout</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
            <span class="k">yield</span> <span class="n">Alignment</span><span class="o">.</span><span class="n">from_sam</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">a</span> <span class="k">else</span> <span class="n">Alignment</span><span class="o">.</span><span class="n">from_paf</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="eris.external.Minimap2.align" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">align</span><span class="p">(</span><span class="n">queries</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Aligns queries to targets.</p>
<p>:param queries: Alignment queries; can be a fasta-formatted string, path to a fasta file, <code>Records</code> or
                <code>Features</code></p>
<p>:param targets: Optional Alignment targets; can be a fasta-formatted string, path to a fasta file, <code>Records</code>
                or <code>Features</code>; will otherwise use the target index built at instantiation.
                If <code>targets</code> is passed and a target index exists, the target index is ignored.
                If <code>query</code> is not a path and <code>targets</code> is not a path, a new target index will need to be
                built, which will overwrite any existing target index, printing a <code>Minimap2Warning</code>.</p>
<p>:returns: A generator of <code>Alignment</code> objects</p>


            <details class="quote">
              <summary>Source code in <code>eris/external.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">align</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">queries</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">]]],</span>
        <span class="n">targets</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">Minimap2AlignConfig</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Alignment</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Aligns queries to targets.</span>

<span class="sd">    :param queries: Alignment queries; can be a fasta-formatted string, path to a fasta file, ``Records`` or</span>
<span class="sd">                    ``Features``</span>

<span class="sd">    :param targets: Optional Alignment targets; can be a fasta-formatted string, path to a fasta file, ``Records``</span>
<span class="sd">                    or ``Features``; will otherwise use the target index built at instantiation.</span>
<span class="sd">                    If ``targets`` is passed and a target index exists, the target index is ignored.</span>
<span class="sd">                    If ``query`` is not a path and ``targets`` is not a path, a new target index will need to be</span>
<span class="sd">                    built, which will overwrite any existing target index, printing a ``Minimap2Warning``.</span>

<span class="sd">    :returns: A generator of ``Alignment`` objects</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">query_arg</span><span class="p">,</span> <span class="n">query_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_seqs</span><span class="p">(</span><span class="o">*</span><span class="n">queries</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_align_config</span>
    <span class="k">if</span> <span class="n">targets</span><span class="p">:</span>
        <span class="n">target_arg</span><span class="p">,</span> <span class="n">target_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_seqs</span><span class="p">(</span><span class="o">*</span><span class="n">targets</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">query_pipe</span> <span class="ow">and</span> <span class="n">target_pipe</span><span class="p">:</span>  <span class="c1"># Both are stdin, so we need to create the target index</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="p">:</span>  <span class="c1"># Existing target index, raise an error rather than overwriting</span>
                <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Overwriting existing target index&#39;</span><span class="p">,</span> <span class="n">Minimap2Warning</span><span class="p">)</span>
            <span class="n">target_arg</span><span class="p">,</span> <span class="n">target_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_index</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="p">:</span>
            <span class="n">target_arg</span><span class="p">,</span> <span class="n">target_pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Minimap2Error</span><span class="p">(</span><span class="s1">&#39;Targets must be supplied if no target index has been built&#39;</span><span class="p">)</span>

    <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">_build_params</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">target_arg</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">query_arg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">query_pipe</span> <span class="ow">or</span> <span class="n">target_pipe</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stdout</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
        <span class="k">yield</span> <span class="n">Alignment</span><span class="o">.</span><span class="n">from_sam</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">a</span> <span class="k">else</span> <span class="n">Alignment</span><span class="o">.</span><span class="n">from_paf</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="eris.external.Minimap2.build_index" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">build_index</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Builds an index for the targets and writes to a temporary file</p>
<p>:param targets: The targets to index; can be a fasta-formatted string, path to a fasta file,
                <code>Records</code> or <code>Features</code>
:returns: A Path to the temporary file containing the index</p>


            <details class="quote">
              <summary>Source code in <code>eris/external.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_index</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">targets</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">SeqFile</span><span class="p">,</span> <span class="n">Record</span><span class="p">,</span> <span class="n">Feature</span><span class="p">]]],</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">Minimap2IndexConfig</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds an index for the targets and writes to a temporary file</span>

<span class="sd">    :param targets: The targets to index; can be a fasta-formatted string, path to a fasta file,</span>
<span class="sd">                    ``Records`` or ``Features``</span>
<span class="sd">    :returns: A Path to the temporary file containing the index</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arg</span><span class="p">,</span> <span class="n">pipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_seqs</span><span class="p">(</span><span class="o">*</span><span class="n">targets</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index_config</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="o">=</span> <span class="n">NamedTemporaryFile</span><span class="p">()</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">_build_params</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s1"> -d </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">pipe</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_non_empty_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">raise</span> <span class="n">Minimap2Error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Failed to build index, </span><span class="si">{</span><span class="n">stderr</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="eris.external.Minimap2.cleanup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cleanup</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Cleans up resources related to the target index if it is set.</p>
<p>This method checks if there is a target index specified and, if so, closes the
index to release any held resources. It also resets the target index
reference to None, ensuring subsequent operations do not attempt to access
a closed resource.</p>


            <details class="quote">
              <summary>Source code in <code>eris/external.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans up resources related to the target index if it is set.</span>

<span class="sd">    This method checks if there is a target index specified and, if so, closes the</span>
<span class="sd">    index to release any held resources. It also resets the target index</span>
<span class="sd">    reference to None, ensuring subsequent operations do not attempt to access</span>
<span class="sd">    a closed resource.</span>

<span class="sd">    Raises:</span>
<span class="sd">        No explicit exceptions are raised, but calling operations on a closed</span>
<span class="sd">        resource externally could produce runtime errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_index</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="eris.external.Minimap2AlignConfig" class="doc doc-heading">
            <code>Minimap2AlignConfig</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Config


  
      dataclass
   (eris.utils.Config)" href="../utils/#eris.utils.Config">Config</a></code></p>


        <p><code>dataclass</code> to handle CLI flags for Minimap2 alignment</p>







              <details class="quote">
                <summary>Source code in <code>eris/external.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Minimap2AlignConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;`dataclass` to handle CLI flags for Minimap2 alignment&quot;&quot;&quot;</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s1">&#39;lr:hq&#39;</span><span class="p">,</span> <span class="s1">&#39;splice&#39;</span><span class="p">,</span> <span class="s1">&#39;splice:hq&#39;</span><span class="p">,</span> <span class="s1">&#39;asm5&#39;</span><span class="p">,</span> <span class="s1">&#39;asm10&#39;</span><span class="p">,</span> <span class="s1">&#39;asm20&#39;</span><span class="p">,</span> <span class="s1">&#39;sr&#39;</span><span class="p">,</span> <span class="s1">&#39;map-pb&#39;</span><span class="p">,</span> <span class="s1">&#39;map-hifi&#39;</span><span class="p">,</span> <span class="s1">&#39;map-ont&#39;</span><span class="p">,</span> <span class="s1">&#39;map-iclr&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ava-pb&#39;</span><span class="p">,</span> <span class="s1">&#39;ava-ont&#39;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">t</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">RESOURCES</span><span class="o">.</span><span class="n">available_cpus</span>  <span class="c1"># Number of threads [3]</span>
    <span class="n">f</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># filter out top FLOAT fraction of repetitive minimizers [0.0002]</span>
    <span class="n">g</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># stop chain elongation if there are no minimizers in INT-bp [5000]</span>
    <span class="n">G</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># max intron length (effective with -xsplice; changing -r) [200k]</span>
    <span class="n">F</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># max fragment length (effective with -xsr or in the fragment mode) [800]</span>
    <span class="n">r</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># chaining/alignment bandwidth and long-join bandwidth [500,20000]</span>
    <span class="n">n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># minimal number of minimizers on a chain [3]</span>
    <span class="n">m</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1">#   minimal chaining score (matching bases minus log gap penalty) [40]</span>
    <span class="n">X</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># skip self and dual mappings (for the all-vs-all mode)</span>
    <span class="n">p</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># min secondary-to-primary score ratio [0.8]</span>
    <span class="n">N</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># retain at most INT secondary alignments [5]</span>
    <span class="n">A</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># matching score [2]</span>
    <span class="n">B</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># mismatch penalty (larger value for lower divergence) [4]</span>
    <span class="n">O</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># gap open penalty [4,24]</span>
    <span class="n">E</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># gap extension penalty; a k-long gap costs min{O1+k*E1,O2+k*E2} [2,1]</span>
    <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Z-drop score and inversion Z-drop score [400,200]</span>
    <span class="n">s</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># minimal peak DP alignment score [80]</span>
    <span class="n">u</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># how to find GT-AG. f:transcript strand, b:both strands, n:don&#39;t match GT-AG [n]</span>
    <span class="n">J</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># splice mode. 0: original minimap2 model; 1: miniprot model [1]</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># output in the SAM format (PAF by default)</span>
    <span class="n">c</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># output CIGAR in PAF</span>
    <span class="n">cs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># output the cs tag; STR is &#39;short&#39; (if absent) or &#39;long&#39; [none]</span>
    <span class="n">ds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># output the ds tag, which is an extension to cs</span>
    <span class="n">MD</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># output the MD tag</span>
    <span class="n">eqx</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># write =/X CIGAR operators</span>
    <span class="n">rev_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">for_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_reads</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">reads</span><span class="p">:</span> <span class="n">ReadSet</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reads</span><span class="o">.</span><span class="n">set_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;illumina&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">]:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;sr&#39;</span>
        <span class="k">elif</span> <span class="n">reads</span><span class="o">.</span><span class="n">set_type</span> <span class="o">==</span> <span class="s1">&#39;pb&#39;</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;map-pb&#39;</span>
        <span class="k">elif</span> <span class="n">reads</span><span class="o">.</span><span class="n">set_type</span> <span class="o">==</span> <span class="s1">&#39;ont&#39;</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;map-ont&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;lr:hq&#39;</span>
        <span class="k">return</span> <span class="n">config</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="eris.external.Minimap2IndexConfig" class="doc doc-heading">
            <code>Minimap2IndexConfig</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Config


  
      dataclass
   (eris.utils.Config)" href="../utils/#eris.utils.Config">Config</a></code></p>


        <p><code>dataclass</code> to handle CLI flags for Minimap2 indexing</p>







              <details class="quote">
                <summary>Source code in <code>eris/external.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Minimap2IndexConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;`dataclass` to handle CLI flags for Minimap2 indexing&quot;&quot;&quot;</span>
    <span class="n">t</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">RESOURCES</span><span class="o">.</span><span class="n">available_cpus</span>  <span class="c1"># Number of threads [3]</span>
    <span class="n">H</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># use homopolymer-compressed k-mer (preferable for PacBio)</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># k-mer size (no larger than 28) [15]</span>
    <span class="n">w</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># minimizer window size [10]</span>
    <span class="n">I</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># split index for every ~NUM input bases [8G]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["toc.follow", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>